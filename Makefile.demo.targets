include Makefile.framework

DEMOOBJS = obj/demo/resource-picture.o \
	obj/demo/resource-entity.o \
	obj/demo/entity-demo.o \
	obj/demo/game.o

lib/libdemo.so: $(DEMOOBJS)
	mkdir -p lib
	$(CC) -shared $(LDFLAGS) -o lib/libdemo.so $(DEMOOBJS) `pkg-config --libs gdk-pixbuf-2.0 gtk+-2.0` -lcruftybehemoth

obj/demo/%.o: src/demo/%.cpp
	mkdir -p obj/demo
	$(CC) $(CFLAGS) `pkg-config --cflags gdk-pixbuf-2.0 gtk+-2.0` -o $@ $<

demo-res: src/demo/resources src/demo/data
	mkdir -p bin
	tar cv -C src/demo/ resources data/ | tar xv -C bin/

src/demo/data: src/demo/data/test.png src/demo/data/entity-1 src/demo/data/levels
src/demo/data/levels: src/demo/data/levels/demo-level-1
src/demo/data/levels/demo-level-1: src/demo/data/levels/demo-level-1/demo-level-1 src/demo/data/levels/demo-level-1/background-1 src/demo/data/levels/demo-level-1/foreground-1
